# FarmOnline+ Website Architecture Documentation

## 🏗️ **Overall Architecture**

The FarmOnline+ website uses a **Hierarchical Single-Page Application (SPA)** architecture with **component-based modular design** and **dynamic content switching**.

### **Core Concepts:**
- **HOC (Higher-Order Components)**: Reusable UI components that can be composed together
- **Content Sections**: Main navigation areas that contain related components
- **Hierarchical Navigation**: Multi-level navigation system with main tabs and submenus
- **Component Embedding**: Build-time component composition for GitHub Pages deployment

---

## 📁 **File Structure & Relationships**

```
FarmOnline+ web/
├── index.html                    # Production file (auto-generated by deploy script)
├── index-dev.html               # Development file with component placeholders
├── deploy-github-pages.ps1      # Build script that embeds components into index.html
├── scripts/
│   ├── main.js                  # Navigation logic and content switching
│   └── component-loader.js      # Development component loading system
├── styles/
│   └── main.css                 # Global styles and hierarchical content CSS
└── components/                   # Modular component library
    ├── hero.html                # NOT USED (legacy)
    ├── navigation/
    │   └── nav.html             # Main navigation component
    ├── sections/                # Shared/footer sections
    │   ├── contact.html         # Contact form (shared across all pages)
    │   └── pricing.html         # Pricing section (shared across all pages)
    ├── management/              # Operations section components
    │   ├── hero.html            # Operations hero section
    │   ├── overview.html        # Management overview
    │   ├── features.html        # Operations features
    │   └── benefits.html        # Business benefits
    ├── integration/             # Integration section components
    │   └── sections.html        # Partner Connectors, BI Solutions, ERP Integration
    ├── infrastructure/          # Infrastructure section components
    │   └── sections.html        # BlueControl Models, Global Infrastructure, Data Security
    ├── applications/            # Applications section components
    │   └── sections.html        # Mobile App, Survey WebApp, Boards WebApp, Analytics WebApp
    └── footer.html              # Main footer component
```

---

## 🧭 **Navigation Architecture**

### **Main Navigation Hierarchy:**

```
┌─ Operations (data-section="operations")
│  ├─ Farm Overview (#hero)
│  ├─ Management Overview (#overview)  
│  ├─ Operations Features (#features)
│  ├─ Business Benefits (#benefits)
│  ├─ Pricing (#pricing) [SHARED]
│  └─ Contact (#contact) [SHARED]
│
├─ Integration (data-section="integration")
│  ├─ Partner Connectors (#partner-connectors)
│  ├─ BI Solutions & Excel (#bi-solutions)
│  ├─ ERP Integration (#erp-integration)
│  └─ Contact (#contact) [SHARED]
│
├─ Infrastructure (data-section="infrastructure")
│  ├─ BlueControl Models (#bluecontrol-models)
│  ├─ Global Infrastructure (#global-infrastructure)
│  ├─ Data Security (#data-security)
│  └─ Contact (#contact) [SHARED]
│
└─ Applications (data-section="applications")
   ├─ Mobile App (#mobile-app)
   ├─ Survey WebApp (#survey-webapp)
   ├─ Boards WebApp (#boards-webapp)
   ├─ Analytics WebApp (#analytics-webapp)
   └─ Contact (#contact) [SHARED]
```

### **Navigation Implementation:**

**1. Main Tabs:** Control which content section is visible
```html
<button class="nav-tab" data-section="operations">Operations</button>
```

**2. Content Sections:** Container divs that show/hide based on main tab selection
```html
<div class="content-section active" data-section="operations">
    <!-- Operations components go here -->
</div>
```

**3. Submenu Links:** Navigate within the active content section
```html
<a href="#hero" class="submenu-link">Farm Overview</a>
```

---

## 🔄 **Content Switching Logic**

### **JavaScript Navigation Logic (scripts/main.js):**

```javascript
// Main tab switching - shows/hides entire content sections
navTabs.forEach(tab => {
    tab.addEventListener('click', () => {
        // Hide all content sections
        contentSections.forEach(section => {
            section.classList.remove('active');
        });
        
        // Show selected content section
        const targetSection = document.querySelector(`[data-section="${sectionName}"]`);
        targetSection.classList.add('active');
    });
});

// Submenu link navigation - scrolls within active section
submenuLinks.forEach(link => {
    link.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = link.getAttribute('href').substring(1);
        const targetElement = document.getElementById(targetId);
        targetElement.scrollIntoView({ behavior: 'smooth' });
    });
});
```

### **CSS Content Management (styles/main.css):**

```css
/* Hierarchical content structure */
.main-content {
    position: relative;
}

.content-section {
    display: none; /* Hidden by default */
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
}

.content-section.active {
    display: block; /* Show active section */
    opacity: 1;
}

/* Shared sections always visible */
.shared-sections {
    display: block;
}
```

---

## 🧩 **Component Architecture**

### **HOC (Higher-Order Component) Pattern:**

Each component is designed as a **self-contained, reusable unit** that can be:
1. **Developed independently** in its own file
2. **Embedded** into the main HTML during build
3. **Styled** with scoped CSS classes
4. **Composed** with other components

### **Component Types:**

#### **1. Layout Components:**
- `navigation/nav.html` - Main navigation structure
- `footer.html` - Site footer

#### **2. Content Components:**
- `management/*` - Operations section content
- `integration/sections.html` - Integration content
- `infrastructure/sections.html` - Infrastructure content  
- `applications/sections.html` - Applications content

#### **3. Shared Components:**
- `sections/pricing.html` - Pricing section (visible on all pages)
- `sections/contact.html` - Contact form (accessible from all sections)

### **Component Embedding Process:**

**Development (index-dev.html):**
```html
<!-- MANAGEMENT_HERO_COMPONENT -->
<!-- INTEGRATION_SECTIONS_COMPONENT -->
<!-- INFRASTRUCTURE_SECTIONS_COMPONENT -->
```

**Build Process (deploy-github-pages.ps1):**
```powershell
# Replace placeholder with actual component content
$content = $content -replace "<!-- MANAGEMENT_HERO_COMPONENT -->", $componentContent
```

**Production (index.html):**
```html
<section id="hero" class="hero">
    <!-- Actual component content embedded here -->
</section>
```

---

## 🎯 **Safe Update Guidelines**

### **When Updating Components:**

#### **✅ SAFE Operations:**
1. **Edit component files directly** (`components/*/`)
2. **Modify content within existing sections**
3. **Update styling in component-specific CSS classes**
4. **Add new submenu items that point to existing sections**

#### **⚠️ REQUIRES CARE:**
1. **Changing section IDs** - Update navigation links accordingly
2. **Moving components between sections** - Update navigation structure
3. **Adding new sections** - Update navigation, CSS, and JavaScript
4. **Modifying content-section data attributes** - Ensure JS navigation alignment

#### **❌ DANGEROUS Operations:**
1. **Directly editing index.html** - Changes will be overwritten by deploy script
2. **Removing content-section divs** - Breaks hierarchical navigation
3. **Changing navigation data-section attributes** without updating content sections
4. **Modifying main.js navigation logic** without understanding the flow

### **Proper Update Workflow:**

1. **Edit component files** in `components/` directory
2. **Test locally** with development server (`npm run dev`)
3. **Deploy** using `.\deploy-github-pages.ps1`
4. **Verify** deployed site functionality

---

## 🔍 **Debugging Navigation Issues**

### **Common Issues & Solutions:**

#### **Issue: Content sections not switching**
- **Check:** Content section `data-section` attributes match navigation `data-section`
- **Check:** JavaScript navigation logic is functioning
- **Check:** CSS `.content-section.active` styles are applied

#### **Issue: Submenu links not working**
- **Check:** Link `href` matches actual section `id`
- **Check:** Target section exists within the active content section
- **Check:** Submenu links have proper event listeners

#### **Issue: Components not appearing**
- **Check:** Component files exist in `components/` directory
- **Check:** Deploy script includes component in `$componentFiles` array
- **Check:** Placeholder exists in `index-dev.html`

---

## 🚀 **Development vs Production**

### **Development Mode:**
- Uses `index-dev.html` with component placeholders
- Components loaded dynamically by `component-loader.js`
- Hot reload with Vite development server
- Easy component editing and testing

### **Production Mode:**
- Uses `index.html` with embedded components
- All components pre-built into single file
- Optimized for GitHub Pages static hosting
- Generated by `deploy-github-pages.ps1` script

---

## 📋 **Component Relationship Matrix**

| Component | Section | Navigation | Dependencies |
|-----------|---------|------------|-------------|
| `management/hero.html` | Operations | #hero | None |
| `management/overview.html` | Operations | #overview | None |
| `management/features.html` | Operations | #features | None |
| `management/benefits.html` | Operations | #benefits | None |
| `integration/sections.html` | Integration | #partner-connectors, #bi-solutions, #erp-integration | None |
| `infrastructure/sections.html` | Infrastructure | #bluecontrol-models, #global-infrastructure, #data-security | None |
| `applications/sections.html` | Applications | #mobile-app, #survey-webapp, #boards-webapp, #analytics-webapp | None |
| `sections/pricing.html` | Shared | #pricing | Available on all sections |
| `sections/contact.html` | Shared | #contact | Available on all sections |
| `navigation/nav.html` | Global | N/A | Controls all navigation |
| `footer.html` | Global | N/A | Site footer |

This architecture ensures **maintainability**, **scalability**, and **safe updates** while preserving the hierarchical navigation structure.
